#
# StartOS package build script
#
# Copyright 2012 StartOS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="GTK+ implementation of wxgtk API for GUI"
HOMEPAGE="http://wxwidgets.org/"
LICENSE="custom,wxWindows"
PACKAGER="Zhongxin Huang <huangzhongxin@ivali.com>"

SRC_URI="http://downloads.sourceforge.net/wxpython/wxPython-src-$V.tar.bz2"
CHECKSUM="05688dc03d61631750f5904273122bb40a2115f5"

RDEPEND="expat zlib glibc gcc-libs gtk2 atk glib2 pango gdk-pixbuf2 freetype fontconfig libXinerama libXxf86vm libSM libpng libjpeg-turbo libtiff libXfixes cairo libX11 libXi libXrandr libXcursor libXcomposite libXdamage libXrender libXext libffi pcre harfbuzz graphite2 icu bzip2 libxcb libXau libXdmcp libICE util-linux-libs xz pixman mesa wayland systemd libdrm libsdl directfb gstreamer0.10 libxml2 gconf gst-plugins-base0.10 dbus-glib dbus-libs glu"
BDEPEND="gst-plugins-bad0.10 glu libXt"
RECOMMENDED=""
CONFLICT=""

pbs_unpack() {
    dounpack
}

pbs_config() {
    config+="--with-gtk=2 
             --with-opengl 
             --enable-unicode 
             --enable-graphics_ctx  
             --disable-optimize
             --enable-mediactrl
             --with-regex=builtin 
             --with-libpng=sys 
             --with-libxpm=sys 
             --with-libjpeg=sys 
             --with-libtiff=sys 
             --with-sdl 
             --disable-precomp-headers"
    doconfig
}

pbs_build() {
    domake
    domake  -C locale allmo
    #Build contrib
    cd contrib/src
    domake
}

pbs_install() {
    cd "$SRCDIR"
    domkinstall
    dodoc docs/licence.txt
    #Install contrib
    cd contrib/src
    domkinstall
}
